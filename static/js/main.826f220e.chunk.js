(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{11:function(e,t,c){},34:function(e,t,c){"use strict";c.r(t);c(11);var n=c(1),s=c.n(n),a=c(20),o=c.n(a),r=c(3),i=c(6),l=c(0);var j=function(e){var t=Object(n.useState)([]),c=Object(r.a)(t,2),s=c[0],a=c[1],o=Object(n.useState)(-1),j=Object(r.a)(o,2),b=j[0],d=j[1];return Object(n.useEffect)((function(){fetch("https://quiet-retreat-88465.herokuapp.com/blog",{method:"GET"}).then((function(e){return e.json()})).then((function(e){a(e.reverse())}))}),[]),Object(n.useEffect)((function(){if(s.length>0){var e=Math.floor(Math.random()*s.length);d(e)}}),[s]),Object(l.jsx)("div",{className:"container",children:Object(l.jsxs)("div",{className:"row d-flex justify-content-evenly",children:[Object(l.jsxs)("div",{className:"col-12 col-md-6",children:[Object(l.jsx)("h2",{className:"h2 text-center",children:"Random Post"}),Object(l.jsx)("div",{children:-1!==b?Object(l.jsx)("div",{className:"card",children:Object(l.jsxs)("div",{className:"card-body",children:[Object(l.jsx)("h5",{className:"card-title fs-2",children:s[b].title}),Object(l.jsx)("p",{className:"card-text fs-5 lh-base",dangerouslySetInnerHTML:{__html:s[b].post}}),Object(l.jsx)(i.b,{to:"/blog/"+s[b]._id,className:"stretched-link"})]})}):Object(l.jsx)("p",{children:'"Loading"'})})]}),Object(l.jsx)("div",{className:"col-12 col-md-3",children:Object(l.jsxs)("div",{children:[Object(l.jsx)("p",{className:"fs-2",children:"Recent Posts"}),Object(l.jsx)("hr",{}),-1!==b?Object(l.jsxs)("ul",{className:"recent-posts lh-lg",children:[Object(l.jsx)("li",{children:Object(l.jsx)(i.b,{to:"/blog/"+s[0]._id,children:s[0].title})}),Object(l.jsx)("hr",{}),Object(l.jsx)("li",{children:Object(l.jsx)(i.b,{to:"/blog/"+s[1]._id,children:s[1].title})}),Object(l.jsx)("hr",{}),Object(l.jsx)("li",{children:Object(l.jsx)(i.b,{to:"/blog/"+s[2]._id,children:s[2].title})})]}):"loading..."]})})]})})},b=c(12);var d=function(e){var t=Object(n.useState)(""),c=Object(r.a)(t,2),s=c[0],a=c[1],o=Object(n.useState)([]),j=Object(r.a)(o,2),d=j[0],u=j[1];return Object(n.useEffect)((function(){var e=localStorage.getItem("token");a(e),fetch("https://quiet-retreat-88465.herokuapp.com/blog",{method:"GET"}).then((function(e){return e.json()})).then((function(e){u(e.reverse())}))}),[]),Object(n.useEffect)((function(){}),[s]),Object(l.jsx)("div",{className:"container",children:Object(l.jsx)("div",{className:"row d-flex justify-content-center ",children:Object(l.jsx)("div",{className:"col-12 col-md-8",children:0===d.lengths?Object(l.jsx)("div",{children:"Loading posts"}):d.map((function(e,t){return Object(l.jsx)("div",{className:"card my-3 p-3 shadow-lg",children:Object(l.jsxs)("div",{className:"card-body",children:[Object(l.jsx)("h5",{className:"card-title fs-1",children:e.title}),Object(l.jsxs)("p",{children:["Posted ",b.DateTime.fromISO(e.postdate).toFormat("LLL dd, yyyy")]}),Object(l.jsx)("hr",{}),Object(l.jsx)("p",{className:"card-text lh-base fs-5",dangerouslySetInnerHTML:{__html:e.post}}),Object(l.jsx)(i.b,{to:"/blog/"+e._id,className:"stretched-link"},e._id)]})},e._id)}))})})})},u=c(4);var h=function(e){var t=Object(n.useState)(),c=Object(r.a)(t,2),s=c[0],a=c[1],o=Object(n.useState)([]),j=Object(r.a)(o,2),d=j[0],h=j[1],m=Object(n.useState)(""),O=Object(r.a)(m,2),f=O[0],x=O[1],p=Object(u.g)().id,g=Object(n.useState)(""),v=Object(r.a)(g,2),N=v[0],y=v[1],S=Object(n.useState)(!1),k=Object(r.a)(S,2),E=k[0],T=k[1];Object(n.useEffect)((function(){var e=localStorage.getItem("token");null!==e&&y(e),fetch("https://quiet-retreat-88465.herokuapp.com/blog/"+p,{method:"GET"}).then((function(e){return e.json()})).then((function(e){a(e)})),_()}),[]);var _=function(){fetch("https://quiet-retreat-88465.herokuapp.com/blog/"+p+"/comments",{method:"GET"}).then((function(e){return e.json()})).then((function(e){h(e.reverse())}))};Object(n.useEffect)((function(){}),[s]);var C=function(e){e.preventDefault(),fetch("https://quiet-retreat-88465.herokuapp.com/blog/"+p,{method:"DELETE",headers:{Authorization:"Bearer "+N},mode:"cors"}).then((function(e){200===e.status&&T(!0)}))};return Object(l.jsxs)("div",{className:"container",children:[function(){if(E)return Object(l.jsx)(u.a,{push:!0,to:"/blog"})}(),Object(l.jsx)("div",{className:"row d-flex justify-content-center ",children:Object(l.jsxs)("div",{className:"col-8",children:["undefined"===typeof s?"Loading":s.map((function(e){return Object(l.jsxs)("div",{className:"post",children:[Object(l.jsx)("h1",{className:"h1",style:{marginBottom:"2vh"},children:e.title}),Object(l.jsxs)("h3",{children:["Posted ",b.DateTime.fromISO(e.postdate).toFormat("LLL dd, yyyy")]}),Object(l.jsx)("hr",{}),Object(l.jsx)("p",{className:"message fs-5 lh-base",dangerouslySetInnerHTML:{__html:e.post}}),Object(l.jsxs)("div",{style:{marginTop:"4vh",display:"flex"},children:[""===N?null:Object(l.jsx)("p",{onClick:C,style:{cursor:"pointer",marginRight:"2vw"},children:"Delete Post"}),""===N?null:Object(l.jsx)(i.b,{to:"/blog/".concat(p,"/edit"),style:{textDecoration:"none",color:"black"},children:"Edit Post"})]})]},p)})),Object(l.jsxs)("form",{onSubmit:function(e){e.preventDefault(),fetch("https://quiet-retreat-88465.herokuapp.com/blog/"+p,{method:"POST",body:JSON.stringify({comment:f}),headers:{"Content-Type":"application/json"},mode:"cors"}).then((function(e){200===e.status&&_()}))},children:[Object(l.jsxs)("div",{className:"mb-3",children:[Object(l.jsx)("label",{htmlFor:"comment-box",className:"form-label"}),Object(l.jsx)("textarea",{className:"form-control",name:"comment",required:!0,onChange:function(e){return x(e.target.value)},id:"comment-box",rows:"3"})]}),Object(l.jsx)("input",{type:"submit",value:"Post Comment"})]}),Object(l.jsxs)("div",{className:"commentArea",children:[Object(l.jsx)("p",{style:{textAlign:"center",marginTop:"3vh"},children:"Comments"}),Object(l.jsx)("hr",{}),"undefined"===typeof d?"Loading":d.map((function(e){return Object(l.jsxs)("div",{className:"mb-4",children:[Object(l.jsx)("p",{className:"fs-5",children:e.message}),""===N?null:Object(l.jsx)("button",{style:{cursor:"pointer"},value:e._id,onClick:function(){var t;t=e._id,fetch("https://quiet-retreat-88465.herokuapp.com/blog/"+p+"/comment/"+t,{method:"DELETE",headers:{Authorization:"Bearer "+N},mode:"cors"}).then((function(e){200===e.status&&_()}))},children:"Delete"})]},e._id)}))]})]})})]})},m=c(16);var O=function(e){var t=Object(n.useState)(""),c=Object(r.a)(t,2),s=c[0],a=c[1],o=Object(n.useState)(""),i=Object(r.a)(o,2),j=i[0],b=i[1],d=Object(n.useState)(""),h=Object(r.a)(d,2),O=h[0],f=h[1],x=Object(n.useState)(!0),p=Object(r.a)(x,2),g=p[0],v=p[1],N=Object(n.useState)(!1),y=Object(r.a)(N,2),S=y[0],k=y[1],E=Object(u.g)().id,T=Object(n.useState)(!1),_=Object(r.a)(T,2),C=_[0],L=_[1],w=Object(n.useState)(),I=Object(r.a)(w,2),P=I[0],q=I[1];return Object(n.useEffect)((function(){E&&fetch("https://quiet-retreat-88465.herokuapp.com/blog/"+E,{method:"GET",mode:"cors"}).then((function(e){if(200===e.status)return e.json()})).then((function(e){return q(e)}));var e=localStorage.getItem("token");null===e?v(!1):a(e)}),[]),Object(n.useEffect)((function(){P&&b(P[0].post)}),[P]),Object(n.useEffect)((function(){}),[s]),Object(l.jsx)("div",{className:"container",children:Object(l.jsx)("div",{className:"row",children:Object(l.jsxs)("div",{className:"col",children:[function(){if(!g)return Object(l.jsx)(u.a,{push:!0,to:"/login"})}(),function(){if(S)return Object(l.jsx)(u.a,{push:!0,to:"/blog"})}(),function(){if(C)return Object(l.jsx)(u.a,{push:!0,to:"/blog/".concat(E)})}(),Object(l.jsx)("h1",{className:"text-center h1",children:P?"Update Post":"Create Post"}),Object(l.jsxs)("form",{onSubmit:P?function(e){e.preventDefault(),fetch("https://quiet-retreat-88465.herokuapp.com/blog/"+E,{method:"PUT",body:JSON.stringify({post:j,title:O}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+s},mode:"cors"}).then((function(e){401===e.status&&localStorage.removeItem("token"),200===e.status&&(P?L(!0):k(!0))}))}:function(e){e.preventDefault(),fetch("https://quiet-retreat-88465.herokuapp.com/blog",{method:"POST",body:JSON.stringify({post:j,title:O}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+s},mode:"cors"}).then((function(e){401===e.status&&localStorage.removeItem("token"),200===e.status&&k(!0)}))},children:[P?Object(l.jsxs)("div",{children:[Object(l.jsx)("label",{htmlFor:"prev-title",children:"Previous Title:"}),Object(l.jsx)("br",{}),Object(l.jsx)("input",{type:"text",style:{minWidth:"30vw",marginBottom:"3vh"},value:P[0].title,required:!0})]}):null,Object(l.jsxs)("div",{children:[Object(l.jsx)("label",{htmlFor:"title",children:"Title:"}),Object(l.jsx)("br",{}),Object(l.jsx)("input",{type:"text",style:{minWidth:"30vw",marginBottom:"3vh"},required:!0,onChange:function(e){return f(e.target.value)}})]}),Object(l.jsx)(m.a,{apiKey:Object({NODE_ENV:"production",PUBLIC_URL:"/blog",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).TINY_KEY,onEditorChange:function(e,t){return b(e)},initialValue:P?P[0].post:"",init:{height:500,menubar:"insert",plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table paste code help wordcount media"],toolbar:"undo redo | formatselect | bold italic backcolor |                         alignleft aligncenter alignright alignjustify |                         bullist numlist outdent indent | removeformat | help | image | media | link"}}),Object(l.jsx)("input",{type:"submit",value:"submit"})]})]})})})};var f=function(e){var t=Object(n.useState)(""),c=Object(r.a)(t,2),s=c[0],a=c[1],o=Object(n.useState)(""),i=Object(r.a)(o,2),j=i[0],b=i[1],d=Object(n.useState)(""),h=Object(r.a)(d,2),m=h[0],O=h[1],f=Object(n.useState)(!1),x=Object(r.a)(f,2),p=x[0],g=x[1],v=Object(n.useState)(!1),N=Object(r.a)(v,2),y=N[0],S=N[1];return Object(n.useEffect)((function(){""!==m&&(localStorage.setItem("token",m),e.setLogin(!0),S(!0))}),[m]),Object(l.jsx)("div",{className:"container",children:Object(l.jsx)("div",{className:"row d-flex justify-content-center",children:Object(l.jsxs)("div",{className:"col-6",children:[function(){if(y)return Object(l.jsx)(u.a,{push:!0,to:"/blog"})}(),Object(l.jsxs)("form",{onSubmit:function(e){e.preventDefault(),fetch("https://quiet-retreat-88465.herokuapp.com/login",{method:"POST",body:JSON.stringify({username:s,password:j}),headers:{"Content-Type":"application/json"},mode:"cors"}).then((function(e){if(400!==e.status)return e.json();localStorage.removeItem("token"),g(!0)})).then((function(e){e&&O(e.token)}))},className:"login-form text-center",style:{outline:"3px solid black",padding:"2vw"},children:[Object(l.jsx)("h1",{className:" h1 mb-3 text-center",children:"Login Form"}),Object(l.jsx)("input",{type:"text",className:"form-control  mb-3",name:"username",required:!0,placeholder:"username",onChange:function(e){return a(e.target.value)}}),Object(l.jsx)("input",{type:"password",className:"form-control mb-3",name:"password",placeholder:"password",required:!0,onChange:function(e){return b(e.target.value)}}),Object(l.jsx)("input",{type:"submit",value:"login"})]}),p?Object(l.jsx)("p",{children:"Failed to log in. Please try again."}):null]})})})},x=function(e){return Object(n.useEffect)((function(){}),[]),Object(l.jsx)("nav",{className:"navbar navbar-light navbar-expand-md shadow mb-5",style:{backgroundColor:"#44b787"},children:Object(l.jsxs)("div",{className:"container",children:[Object(l.jsx)(i.b,{to:"/",className:"navbar-brand",children:"Home"}),Object(l.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navContent","aria-controls":"navContent","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(l.jsx)("span",{className:"navbar-toggler-icon"})}),Object(l.jsx)("div",{className:"collapse navbar-collapse d-flex justify-content-end",id:"navContent",children:Object(l.jsxs)("ul",{className:"navbar-nav",children:[Object(l.jsx)("li",{className:"nav-item",children:Object(l.jsx)(i.b,{to:"/blog",className:"nav-link",children:"Blog"})}),e.loggedIn?Object(l.jsx)("li",{className:"nav-item",children:Object(l.jsx)(i.b,{to:"/blog/create",className:"nav-link",children:"Create"})}):null,e.loggedIn?Object(l.jsx)("li",{onClick:function(){localStorage.removeItem("token"),e.setLogin(!1)},className:"nav-item nav-link",style:{cursor:"pointer"},children:"Log Out"}):Object(l.jsx)("li",{className:"nav-item",children:Object(l.jsx)(i.b,{to:"/login",className:"nav-link",children:"Login"})})]})})]})})};var p=function(){var e=Object(n.useState)(!1),t=Object(r.a)(e,2),c=t[0],s=t[1];function a(e){s(e)}return Object(n.useEffect)((function(){null!==localStorage.getItem("token")&&s(!0)}),[]),Object(n.useEffect)((function(){}),[c]),Object(l.jsx)("div",{className:"App",children:Object(l.jsxs)(i.a,{hashType:"slash",children:[Object(l.jsx)(x,{setLogin:a,loggedIn:c}),Object(l.jsxs)(u.d,{children:[Object(l.jsx)(u.b,{path:"/",exact:!0,component:j}),Object(l.jsx)(u.b,{path:"/blog/",exact:!0,children:Object(l.jsx)(d,{})}),Object(l.jsx)(u.b,{path:"/blog/create",exact:!0,children:Object(l.jsx)(O,{})}),Object(l.jsx)(u.b,{path:"/blog/:id/edit",exact:!0,children:Object(l.jsx)(O,{})}),Object(l.jsx)(u.b,{path:"/blog/:id",exact:!0,children:Object(l.jsx)(h,{})}),Object(l.jsx)(u.b,{path:"/login",exact:!0,children:Object(l.jsx)(f,{setLogin:a})})]})]})})};o.a.render(Object(l.jsx)(s.a.StrictMode,{children:Object(l.jsx)(p,{})}),document.getElementById("root"))}},[[34,1,2]]]);
//# sourceMappingURL=main.826f220e.chunk.js.map
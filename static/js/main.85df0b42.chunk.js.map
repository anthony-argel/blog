{"version":3,"sources":["components/Home.js","components/Blog.js","components/BlogPost.js","components/BlogForm.js","components/LoginForm.js","components/NavBar.js","App.js","index.js"],"names":["Home","Blog","props","useState","token","setToken","posts","setPosts","useEffect","tempToken","localStorage","getItem","fetch","method","then","res","json","reverse","className","map","value","index","to","_id","title","DateTime","fromISO","postdate","toFormat","dangerouslySetInnerHTML","__html","post","BlogPost","setPost","commentsList","setCommentsList","message","setMessage","id","useParams","deleted","setDeleted","deletePost","e","preventDefault","console","log","headers","mode","status","push","checkDeleted","style","marginBottom","marginTop","onClick","cursor","marginRight","onSubmit","body","JSON","stringify","comment","window","location","reload","name","required","onChange","target","type","textAlign","comment_id","BlogForm","setTitle","loggedIn","setLoggedIn","posted","setPosted","blogData","setBlogData","loginCheck","postCheck","removeItem","htmlFor","minWidth","apiKey","process","TINY_KEY","onEditorChange","content","editor","initialValue","init","height","menubar","plugins","toolbar","LoginForm","user","setUser","password","setPassword","error","setError","setItem","username","placeholder","NavBar","App","path","exact","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.85df0b42.chunk.js","sourcesContent":["import React, { useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\n\nfunction Home(props) {\n    useEffect(()=> {\n    }, []);\n\n    return (\n        <div className=\"content\">\n            <p>Loaded home</p>\n            <Link to='/login'>Log in</Link>\n        </div>\n    )\n}\n\nexport default Home;","import React, { useEffect, useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport '../styles/reset.css'\nimport '../styles/index.css'\nimport {DateTime} from \"luxon\";\n\nfunction Blog(props) {\n    const [token, setToken] = useState('');\n    const [posts, setPosts] = useState([]);\n\n    useEffect(()=> {\n        const tempToken = localStorage.getItem('token');\n        setToken(tempToken);    \n\n        \n        fetch('https://quiet-retreat-88465.herokuapp.com/blog', {\n            method: 'GET'\n        })\n        .then(res => res.json())\n        .then(res => {setPosts(res.reverse())});\n    }, []);\n\n    useEffect(() => {\n        if(token !== '') {\n        }\n    }, [token]);\n\n\n    return (\n        <div className=\"content\">\n            {posts.map((value, index) => {\n                \n                return <Link to={'/blog/'+value._id} key={value._id}><div className=\"post\">\n                    <p className='title'>{value.title}</p>\n                    <p>Posted {DateTime.fromISO(value.postdate).toFormat('LLL dd, yyyy')}</p>\n                    <hr/>\n                    <div className=\"message\" dangerouslySetInnerHTML={{__html: value.post}}/>\n                    </div>\n                </Link>\n                \n            })}\n        </div>\n    )\n}\n\nexport default Blog;","import React, { useEffect, useState } from \"react\";\nimport { Redirect, useParams, Link } from \"react-router-dom\";\nimport '../styles/reset.css';\nimport '../styles/index.css';\nimport { DateTime } from \"luxon\";\n\nfunction BlogPost(props) {\n    const [post, setPost] = useState();\n    const [commentsList, setCommentsList] = useState([]);\n    const [message, setMessage] = useState(\"\");\n    const {id} = useParams();\n    const [token, setToken] = useState('');\n    const [deleted, setDeleted] = useState(false);\n\n    useEffect(()=> {\n        const tempToken = localStorage.getItem('token');\n        if (tempToken !== null) {\n            setToken(tempToken);\n        }\n\n        fetch('https://quiet-retreat-88465.herokuapp.com/blog/'+id, {\n            method: 'GET'\n        })\n        .then(res => res.json())\n        .then(res => {setPost(res)});\n\n        fetch('https://quiet-retreat-88465.herokuapp.com/blog/'+id+'/comments', {\n            method: 'GET'\n        })\n        .then(res => res.json())\n        .then(res => {setCommentsList(res)});\n    }, []);\n\n    useEffect(()=> {\n    }, [post]);\n\n    function submitForm(e) {\n        e.preventDefault();\n        console.log(message);\n        fetch('https://quiet-retreat-88465.herokuapp.com/blog/'+id, {\n            method: 'POST',\n            body: JSON.stringify({comment: message}),\n            headers: { 'Content-Type': 'application/json' },\n            mode: 'cors'\n        })\n        .then(res=> {\n            if(res.status === 200) {\n                window.location.reload();\n            }\n        })\n    }\n\n    const deletePost = (e) => {\n        e.preventDefault();\n        console.log(message);\n        fetch('https://quiet-retreat-88465.herokuapp.com/blog/'+id, {\n            method: 'DELETE',\n            headers: { 'Authorization' : 'Bearer ' + token },\n            mode: 'cors'\n        })\n        .then(res=> {\n            if(res.status === 200) {\n                setDeleted(true);\n            }\n        })\n    }\n\n    const checkDeleted = () => {\n        if(deleted) {\n            return <Redirect push to='/blog'/>\n        }\n    }\n\n    const deleteComment = (comment_id) => {\n        console.log(message);\n        fetch('https://quiet-retreat-88465.herokuapp.com/blog/'+id+\"/comment/\"+comment_id, {\n            method: 'DELETE',\n            headers: { 'Authorization' : 'Bearer ' + token },\n            mode: 'cors'\n        })\n        .then(res=> {\n            if(res.status === 200) {\n                window.location.reload();\n            }\n        })\n    }\n\n    return (\n        <div className=\"content\">\n            {checkDeleted()}\n           {typeof post === 'undefined' ? \"Loading\" : post.map((value) => {\n               return <div key={id} className='post'>\n                   <h1 style={{marginBottom: \"2vh\"}}>{value.title}</h1>\n                   <h2>Posted {DateTime.fromISO(value.postdate).toFormat('LLL dd, yyyy')}</h2>\n               <hr/><p className='message' dangerouslySetInnerHTML={{__html: value.post}}></p>\n               <div className='flex-row' style={{marginTop: \"4vh\"}}>\n                   {token === '' ? null : <p onClick={deletePost} style={{cursor:\"pointer\", marginRight:\"2vw\"}}>Delete Post</p>}\n               {token === '' ? null : <Link to={`/blog/${id}/edit`}>Edit Post</Link>}</div></div>\n           })}\n           <form onSubmit={submitForm}>\n               <textarea name='comment' id=\"comment-box\" required onChange={e => setMessage(e.target.value)}></textarea><br/>\n               <input type='submit' value='Post Comment'></input>\n           </form>\n           <div className='commentArea'>\n            <p style={{textAlign:\"center\", marginTop:\"3vh\"}}>Comments</p>\n            <hr></hr>\n            {typeof commentsList === 'undefined' ? \"Loading\" : commentsList.map((value) => {\n                return <div className=\"comment\" key={value._id}>\n                    <p>{value.message}</p>\n                    {token === '' ? null : <button style={{cursor:\"pointer\"}} value={value._id} onClick={() => {deleteComment(value._id)}}>Delete</button>}         \n                </div>\n            })}\n           </div>\n           \n        </div>\n    )\n}\n\nexport default BlogPost;","import React, { useEffect, useState } from \"react\";\nimport { Redirect, useParams } from 'react-router-dom';\nimport { Editor } from '@tinymce/tinymce-react';\nimport '@tinymce/tinymce-react'\nimport '../styles/index.css'\n\nfunction BlogForm(props) {\n    const [token, setToken] = useState('');\n    const [post, setPost] = useState('');\n    const [title, setTitle] = useState('');\n    const [loggedIn, setLoggedIn] = useState(true);\n    const [posted, setPosted] = useState(false);\n    const {id} = useParams();\n\n    const [blogData, setBlogData] = useState();\n\n    useEffect(()=> {\n        if(id) {\n            fetch('https://quiet-retreat-88465.herokuapp.com/blog/' + id, {\n                method: 'GET',\n                mode: 'cors'\n            })\n            .then(res => {\n                if(res.status === 200) {\n                    return res.json();\n                }    \n            })\n            .then(res => setBlogData(res))\n        }\n\n        const tempToken = localStorage.getItem('token');\n        if(tempToken === null) {\n            setLoggedIn(false);\n        }\n        else {\n            setToken(tempToken);\n        }\n    }, []);\n\n    useEffect(() => {\n        if(blogData) {\n            console.log(blogData)\n        }\n    }, [blogData])\n\n    useEffect(() => {\n        if(token !== '') {\n        }\n    }, [token]);\n\n    function postBlogPost(e) {\n        e.preventDefault();\n        fetch('https://quiet-retreat-88465.herokuapp.com/blog', {\n            method: 'POST',\n            body: JSON.stringify({post:post, title:title}),\n            headers: { 'Content-Type': 'application/json',\n            'Authorization' : 'Bearer ' + token },\n            mode: 'cors'\n        })\n        .then(res => {\n            if(res.status === 401) { // token expired\n                localStorage.removeItem('token');\n            }\n            if(res.status === 200) {\n                setPosted(true);\n            }    \n        })\n    }\n\n    const loginCheck = () => {\n        if(!loggedIn) \n            return <Redirect push to='/login'/>\n    }\n\n    const postCheck = () => {\n        if(posted) {\n            return <Redirect push to='/blog'/>\n        }\n    }\n\n    const updateBlogPost = (e) => {\n        e.preventDefault();\n        fetch('https://quiet-retreat-88465.herokuapp.com/blog/'+id, {\n            method: 'PUT',\n            body: JSON.stringify({post:post, title:title}),\n            headers: { 'Content-Type': 'application/json',\n            'Authorization' : 'Bearer ' + token },\n            mode: 'cors'\n        })\n        .then(res => {\n            if(res.status === 401) { // token expired\n                localStorage.removeItem('token');\n            }\n            if(res.status === 200) {\n                if(blogData) {\n                    window.location.reload();\n                } else {\n                    setPosted(true);\n                }\n            }    \n        })\n    }\n\n    return (\n        <div className=\"content\">\n            {loginCheck()}\n            {postCheck()}\n            <h1>Create A Post</h1>\n            <form className=\"flex-column\" onSubmit={blogData ? updateBlogPost : postBlogPost}>\n                {blogData ? \n                    <div>\n                        <label htmlFor='prev-title'>Previous Title:</label><br/>\n                        <input type='text' style={{minWidth:\"30vw\", marginBottom:\"3vh\"}} value={blogData[0].title} required={true}></input>\n                    </div>\n                : null}\n                    <div>\n                    <label htmlFor='title'>Title:</label><br/>\n                    <input type='text' style={{minWidth:\"30vw\", marginBottom:\"3vh\"}} required={true} onChange={e => setTitle(e.target.value)}></input>\n                    </div>\n                <Editor apiKey={process.env.TINY_KEY}\n                    onEditorChange={(content, editor) => setPost(content)}\n                    initialValue={blogData ? blogData[0].post : \"loading\"}\n                    init={{\n                    height: 500,\n                    menubar: false,\n                    plugins: [\n                        'advlist autolink lists link image charmap print preview anchor',\n                        'searchreplace visualblocks code fullscreen',\n                        'insertdatetime media table paste code help wordcount'\n                    ],\n                    toolbar:\n                        'undo redo | formatselect | bold italic backcolor | \\\n                        alignleft aligncenter alignright alignjustify | \\\n                        bullist numlist outdent indent | removeformat | help | image'\n                    }}\n                />\n                <input type='submit' value='submit'></input>\n            </form>\n        </div>\n    )\n}\n\nexport default BlogForm;","import React, { useEffect, useState } from \"react\";\nimport '../styles/index.css';\n\nfunction LoginForm(props) {\n    const [user, setUser] = useState(\"\");\n    const [password, setPassword] = useState(\"\");\n    const [token, setToken] = useState('');\n    const [loggedIn, setLoggedIn] = useState(false);\n    const [error, setError] = useState(false);\n\n    function login(e){\n        e.preventDefault();\n        fetch('https://quiet-retreat-88465.herokuapp.com/login', {\n            method: 'POST',\n            body: JSON.stringify({username: user, password: password}),\n            headers: { 'Content-Type': 'application/json' },\n            mode: 'cors'\n        })\n        .then(res => {\n            if(res.status === 400){\n                localStorage.removeItem('token');\n                setError(true);\n            }\n            else {\n                return res.json()\n            }\n        })\n        .then(res => {\n            if(res) {\n                setToken(res.token);\n            }\n        })\n        \n    }\n\n    useEffect(() => {\n        if(token !== '') {\n            localStorage.setItem('token', token);\n            setLoggedIn(true);\n        }\n    }, [token]);\n\n    const loginCheck = () => {\n        if(loggedIn) {\n            window.location.reload();\n        }\n    }\n\n    return (\n        <div className=\"content\">\n            {loginCheck()}\n            <h1>Login Form</h1>\n            <form onSubmit={login} className='login-form'>\n                <input type=\"text\" \n                name=\"username\" \n                required\n                placeholder='username'\n                onChange={e => setUser(e.target.value)}></input>\n                <input type=\"password\" \n                name=\"password\"\n                placeholder='password'\n                required\n                onChange={e => setPassword(e.target.value)}></input>\n                <input type=\"submit\" value='login'></input>\n            </form>\n            {error ? <p>Failed to log in. Please try again.</p> : null}\n        </div>\n    )\n}\n\nexport default LoginForm;","import {NavLink} from \"react-router-dom\";\nimport React, { useEffect, useState } from \"react\";\nimport '../styles/index.css';\n\nconst NavBar = (props) => {\n    const [token, setToken] = useState();\n\n    useEffect(() => {\n        setToken(localStorage.getItem('token'));\n        \n    }, [])\n\n    const logOut =() => {\n        localStorage.removeItem('token');\n        window.location.reload();\n    }\n\n    return (\n        <nav>\n            <div className='nav-left'>\n                <ul>\n                    <li><NavLink to='/blog'>Blog</NavLink></li>\n                </ul>\n            </div>\n            <div className='nav-right'>\n                <ul className='flex-row'>\n                    {token === null ? <li><NavLink to='/login'>Login</NavLink></li> : <li onClick={logOut} style={{cursor:'pointer'}}>Log Out</li>}\n                    {token !== null ? <li><NavLink to='/blog/create'>Create</NavLink></li> : null}\n                </ul>\n            </div>\n        </nav>\n    )\n}\n\nexport default NavBar;","import React from \"react\";\nimport Home from './components/Home';\nimport Blog from './components/Blog';\nimport BlogPost from './components/BlogPost';\nimport BlogForm from './components/BlogForm';\nimport LoginForm from './components/LoginForm';\nimport NavBar from './components/NavBar';\nimport {\n  BrowserRouter,\n  Switch,\n  Route,\n  Redirect,\n} from \"react-router-dom\";\n\nfunction App() {\n\n  return (\n    <div className=\"App\">\n      <BrowserRouter>\n      <NavBar/>\n        <Switch>\n          <Route path='/' exact ><Redirect to='/blog'/></Route>\n          <Route path='/blog' exact><Blog /></Route>\n          <Route path='/blog/create' exact><BlogForm /></Route>\n          <Route path='/blog/:id/edit' exact><BlogForm /></Route>\n          <Route path='/blog/:id' exact><BlogPost /></Route>\n          <Route path='/login' exact ><LoginForm /></Route>\n        </Switch>\n      </BrowserRouter>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}
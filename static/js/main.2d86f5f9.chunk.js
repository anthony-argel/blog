(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{12:function(e,t,c){},34:function(e,t,c){"use strict";c.r(t);c(12);var s=c(1),n=c.n(s),a=c(20),o=c.n(a),r=c(3),i=c(6),l=c(11),j=c(0);var b=function(e){var t=Object(s.useState)([]),c=Object(r.a)(t,2),n=c[0],a=c[1],o=Object(s.useState)(-1),b=Object(r.a)(o,2),d=b[0],u=b[1];return Object(s.useEffect)((function(){fetch("https://quiet-retreat-88465.herokuapp.com/blog",{method:"GET"}).then((function(e){return e.json()})).then((function(e){a(e.reverse())}))}),[]),Object(s.useEffect)((function(){if(n.length>0){var e=Math.floor(Math.random()*n.length);u(e)}}),[n]),Object(j.jsx)("div",{className:"container",children:Object(j.jsxs)("div",{className:"row d-flex justify-content-evenly",children:[Object(j.jsxs)("div",{className:"col-12 col-md-6",children:[Object(j.jsx)("h2",{className:"h2 text-center",children:"Random Post"}),Object(j.jsx)("div",{children:-1!==d?Object(j.jsx)("div",{className:"card",children:Object(j.jsxs)("div",{className:"card-body",children:[Object(j.jsx)("h5",{className:"card-title fs-2",children:n[d].title}),Object(j.jsxs)("p",{children:["Posted ",l.DateTime.fromISO(n[d].postdate).toFormat("LLL dd, yyyy")]}),Object(j.jsx)("hr",{}),Object(j.jsx)("p",{className:"card-text fs-5 lh-base",dangerouslySetInnerHTML:{__html:n[d].post}}),Object(j.jsx)(i.b,{to:"/blog/"+n[d]._id,className:"stretched-link"})]})}):Object(j.jsx)("div",{class:"spinner-border text-success",role:"status",children:Object(j.jsx)("span",{class:"visually-hidden",children:"Loading..."})})})]}),Object(j.jsx)("div",{className:"col-12 col-md-3",children:Object(j.jsxs)("div",{children:[Object(j.jsx)("p",{className:"fs-2",children:"Recent Posts"}),Object(j.jsx)("hr",{}),-1!==d?Object(j.jsxs)("ul",{className:"recent-posts lh-lg",children:[Object(j.jsx)("li",{children:Object(j.jsx)(i.b,{to:"/blog/"+n[0]._id,children:n[0].title})}),Object(j.jsx)("hr",{}),Object(j.jsx)("li",{children:Object(j.jsx)(i.b,{to:"/blog/"+n[1]._id,children:n[1].title})}),Object(j.jsx)("hr",{}),Object(j.jsx)("li",{children:Object(j.jsx)(i.b,{to:"/blog/"+n[2]._id,children:n[2].title})})]}):Object(j.jsx)("div",{class:"spinner-border text-success",role:"status",children:Object(j.jsx)("span",{class:"visually-hidden",children:"Loading..."})})]})})]})})};var d=function(e){var t=Object(s.useState)(""),c=Object(r.a)(t,2),n=c[0],a=c[1],o=Object(s.useState)([]),b=Object(r.a)(o,2),d=b[0],u=b[1];return Object(s.useEffect)((function(){var e=localStorage.getItem("token");a(e),fetch("https://quiet-retreat-88465.herokuapp.com/blog",{method:"GET"}).then((function(e){return e.json()})).then((function(e){u(e.reverse())}))}),[]),Object(s.useEffect)((function(){}),[n]),Object(j.jsx)("div",{className:"container",children:Object(j.jsx)("div",{className:"row d-flex justify-content-center ",children:Object(j.jsx)("div",{className:"col-12 col-md-8",children:0===d.lengths?Object(j.jsx)("div",{class:"spinner-border text-success",role:"status",children:Object(j.jsx)("span",{class:"visually-hidden",children:"Loading..."})}):d.map((function(e,t){return Object(j.jsx)("div",{className:"card my-3 p-3 shadow-lg",children:Object(j.jsxs)("div",{className:"card-body",children:[Object(j.jsx)("h5",{className:"card-title fs-1",children:e.title}),Object(j.jsxs)("p",{children:["Posted ",l.DateTime.fromISO(e.postdate).toFormat("LLL dd, yyyy")]}),Object(j.jsx)("hr",{}),Object(j.jsx)("p",{className:"card-text lh-base fs-5",dangerouslySetInnerHTML:e.post.length>700?{__html:e.post.substr(0,700)+"... <br/>(See more)"}:{__html:e.post}}),Object(j.jsx)(i.b,{to:"/blog/"+e._id,className:"stretched-link"},e._id)]})},e._id)}))})})})},u=c(4);var h=function(e){var t=Object(s.useState)(),c=Object(r.a)(t,2),n=c[0],a=c[1],o=Object(s.useState)([]),b=Object(r.a)(o,2),d=b[0],h=b[1],m=Object(s.useState)(""),O=Object(r.a)(m,2),f=O[0],p=O[1],x=Object(u.g)().id,g=Object(s.useState)(""),v=Object(r.a)(g,2),y=v[0],N=v[1],S=Object(s.useState)(!1),k=Object(r.a)(S,2),E=k[0],T=k[1];Object(s.useEffect)((function(){var e=localStorage.getItem("token");null!==e&&N(e),fetch("https://quiet-retreat-88465.herokuapp.com/blog/"+x,{method:"GET"}).then((function(e){return e.json()})).then((function(e){a(e)})),L()}),[]);var L=function(){fetch("https://quiet-retreat-88465.herokuapp.com/blog/"+x+"/comments",{method:"GET"}).then((function(e){return e.json()})).then((function(e){h(e.reverse())}))};Object(s.useEffect)((function(){}),[n]);var _=function(e){e.preventDefault(),fetch("https://quiet-retreat-88465.herokuapp.com/blog/"+x,{method:"DELETE",headers:{Authorization:"Bearer "+y},mode:"cors"}).then((function(e){200===e.status&&T(!0)}))};return Object(j.jsxs)("div",{className:"container",children:[function(){if(E)return Object(j.jsx)(u.a,{push:!0,to:"/blog"})}(),Object(j.jsx)("div",{className:"row d-flex justify-content-center ",children:Object(j.jsxs)("div",{className:"col-11 col-lg-8",children:["undefined"===typeof n?Object(j.jsx)("div",{class:"spinner-border text-success",role:"status",children:Object(j.jsx)("span",{class:"visually-hidden",children:"Loading..."})}):n.map((function(e){return Object(j.jsxs)("div",{className:"post",children:[Object(j.jsx)("h1",{className:"h1",style:{marginBottom:"2vh"},children:e.title}),Object(j.jsxs)("h3",{children:["Posted ",l.DateTime.fromISO(e.postdate).toFormat("LLL dd, yyyy")]}),Object(j.jsx)("hr",{}),Object(j.jsx)("p",{className:"message fs-5 lh-base",dangerouslySetInnerHTML:{__html:e.post}}),Object(j.jsxs)("div",{style:{marginTop:"4vh",display:"flex"},children:[""===y?null:Object(j.jsx)("p",{onClick:_,style:{cursor:"pointer",marginRight:"2vw"},children:"Delete Post"}),""===y?null:Object(j.jsx)(i.b,{to:"/blog/".concat(x,"/edit"),style:{textDecoration:"none",color:"black"},children:"Edit Post"})]})]},x)})),Object(j.jsxs)("form",{onSubmit:function(e){e.preventDefault(),fetch("https://quiet-retreat-88465.herokuapp.com/blog/"+x,{method:"POST",body:JSON.stringify({comment:f}),headers:{"Content-Type":"application/json"},mode:"cors"}).then((function(e){200===e.status&&L()}))},children:[Object(j.jsxs)("div",{className:"mb-3",children:[Object(j.jsx)("label",{htmlFor:"comment-box",className:"form-label"}),Object(j.jsx)("textarea",{className:"form-control",name:"comment",required:!0,onChange:function(e){return p(e.target.value)},id:"comment-box",rows:"3"})]}),Object(j.jsx)("input",{type:"submit",value:"Post Comment"})]}),Object(j.jsxs)("div",{className:"commentArea",children:[Object(j.jsx)("p",{style:{textAlign:"center",marginTop:"3vh"},children:"Comments"}),Object(j.jsx)("hr",{}),"undefined"===typeof d?"Loading":d.map((function(e){return Object(j.jsxs)("div",{className:"mb-4",children:[Object(j.jsx)("p",{className:"fs-5",children:e.message}),""===y?null:Object(j.jsx)("button",{style:{cursor:"pointer"},value:e._id,onClick:function(){var t;t=e._id,fetch("https://quiet-retreat-88465.herokuapp.com/blog/"+x+"/comment/"+t,{method:"DELETE",headers:{Authorization:"Bearer "+y},mode:"cors"}).then((function(e){200===e.status&&L()}))},children:"Delete"})]},e._id)}))]})]})})]})},m=c(16);var O=function(e){var t=Object(s.useState)(""),c=Object(r.a)(t,2),n=c[0],a=c[1],o=Object(s.useState)(""),i=Object(r.a)(o,2),l=i[0],b=i[1],d=Object(s.useState)(""),h=Object(r.a)(d,2),O=h[0],f=h[1],p=Object(s.useState)(!0),x=Object(r.a)(p,2),g=x[0],v=x[1],y=Object(s.useState)(!1),N=Object(r.a)(y,2),S=N[0],k=N[1],E=Object(u.g)().id,T=Object(s.useState)(!1),L=Object(r.a)(T,2),_=L[0],C=L[1],I=Object(s.useState)(),w=Object(r.a)(I,2),P=w[0],q=w[1];return Object(s.useEffect)((function(){E&&fetch("https://quiet-retreat-88465.herokuapp.com/blog/"+E,{method:"GET",mode:"cors"}).then((function(e){if(200===e.status)return e.json()})).then((function(e){return q(e)}));var e=localStorage.getItem("token");null===e?v(!1):a(e)}),[]),Object(s.useEffect)((function(){P&&b(P[0].post)}),[P]),Object(s.useEffect)((function(){}),[n]),Object(j.jsx)("div",{className:"container",children:Object(j.jsx)("div",{className:"row",children:Object(j.jsxs)("div",{className:"col",children:[function(){if(!g)return Object(j.jsx)(u.a,{push:!0,to:"/login"})}(),function(){if(S)return Object(j.jsx)(u.a,{push:!0,to:"/blog"})}(),function(){if(_)return Object(j.jsx)(u.a,{push:!0,to:"/blog/".concat(E)})}(),Object(j.jsx)("h1",{className:"text-center h1",children:P?"Update Post":"Create Post"}),Object(j.jsxs)("form",{onSubmit:P?function(e){e.preventDefault(),fetch("https://quiet-retreat-88465.herokuapp.com/blog/"+E,{method:"PUT",body:JSON.stringify({post:l,title:O}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+n},mode:"cors"}).then((function(e){401===e.status&&localStorage.removeItem("token"),200===e.status&&(P?C(!0):k(!0))}))}:function(e){e.preventDefault(),fetch("https://quiet-retreat-88465.herokuapp.com/blog",{method:"POST",body:JSON.stringify({post:l,title:O}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+n},mode:"cors"}).then((function(e){401===e.status&&localStorage.removeItem("token"),200===e.status&&k(!0)}))},children:[P?Object(j.jsxs)("div",{children:[Object(j.jsx)("label",{htmlFor:"prev-title",children:"Previous Title:"}),Object(j.jsx)("br",{}),Object(j.jsx)("input",{type:"text",style:{minWidth:"30vw",marginBottom:"3vh"},value:P[0].title,required:!0})]}):null,Object(j.jsxs)("div",{children:[Object(j.jsx)("label",{htmlFor:"title",children:"Title:"}),Object(j.jsx)("br",{}),Object(j.jsx)("input",{type:"text",style:{minWidth:"30vw",marginBottom:"3vh"},required:!0,onChange:function(e){return f(e.target.value)}})]}),Object(j.jsx)(m.a,{apiKey:Object({NODE_ENV:"production",PUBLIC_URL:"/blog",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).TINY_KEY,onEditorChange:function(e,t){return b(e)},initialValue:P?P[0].post:"",init:{height:500,menubar:"insert",plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table paste code help wordcount media"],toolbar:"undo redo | formatselect | bold italic backcolor |                         alignleft aligncenter alignright alignjustify |                         bullist numlist outdent indent | removeformat | help | image | media | link"}}),Object(j.jsx)("input",{type:"submit",value:"submit"})]})]})})})};var f=function(e){var t=Object(s.useState)(""),c=Object(r.a)(t,2),n=c[0],a=c[1],o=Object(s.useState)(""),i=Object(r.a)(o,2),l=i[0],b=i[1],d=Object(s.useState)(""),h=Object(r.a)(d,2),m=h[0],O=h[1],f=Object(s.useState)(!1),p=Object(r.a)(f,2),x=p[0],g=p[1],v=Object(s.useState)(!1),y=Object(r.a)(v,2),N=y[0],S=y[1];return Object(s.useEffect)((function(){""!==m&&(localStorage.setItem("token",m),e.setLogin(!0),S(!0))}),[m]),Object(j.jsx)("div",{className:"container",children:Object(j.jsx)("div",{className:"row d-flex justify-content-center",children:Object(j.jsxs)("div",{className:"col-6",children:[function(){if(N)return Object(j.jsx)(u.a,{push:!0,to:"/blog"})}(),Object(j.jsxs)("form",{onSubmit:function(e){e.preventDefault(),fetch("https://quiet-retreat-88465.herokuapp.com/login",{method:"POST",body:JSON.stringify({username:n,password:l}),headers:{"Content-Type":"application/json"},mode:"cors"}).then((function(e){if(400!==e.status)return e.json();localStorage.removeItem("token"),g(!0)})).then((function(e){e&&O(e.token)}))},className:"login-form text-center",style:{outline:"3px solid black",padding:"2vw"},children:[Object(j.jsx)("h1",{className:" h1 mb-3 text-center",children:"Login Form"}),Object(j.jsx)("input",{type:"text",className:"form-control  mb-3",name:"username",required:!0,placeholder:"username",onChange:function(e){return a(e.target.value)}}),Object(j.jsx)("input",{type:"password",className:"form-control mb-3",name:"password",placeholder:"password",required:!0,onChange:function(e){return b(e.target.value)}}),Object(j.jsx)("input",{type:"submit",value:"login"})]}),x?Object(j.jsx)("p",{children:"Failed to log in. Please try again."}):null]})})})},p=function(e){return Object(s.useEffect)((function(){}),[]),Object(j.jsx)("nav",{className:"navbar navbar-light navbar-expand-md shadow mb-5",style:{backgroundColor:"#44b787"},children:Object(j.jsxs)("div",{className:"container",children:[Object(j.jsx)(i.b,{to:"/",className:"navbar-brand",children:"Home"}),Object(j.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navContent","aria-controls":"navContent","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(j.jsx)("span",{className:"navbar-toggler-icon"})}),Object(j.jsx)("div",{className:"collapse navbar-collapse d-flex justify-content-end",id:"navContent",children:Object(j.jsxs)("ul",{className:"navbar-nav",children:[Object(j.jsx)("li",{className:"nav-item",children:Object(j.jsx)(i.b,{to:"/blog",className:"nav-link",children:"Blog"})}),e.loggedIn?Object(j.jsx)("li",{className:"nav-item",children:Object(j.jsx)(i.b,{to:"/blog/create",className:"nav-link",children:"Create"})}):null,e.loggedIn?Object(j.jsx)("li",{onClick:function(){localStorage.removeItem("token"),e.setLogin(!1)},className:"nav-item nav-link",style:{cursor:"pointer"},children:"Log Out"}):Object(j.jsx)("li",{className:"nav-item",children:Object(j.jsx)(i.b,{to:"/login",className:"nav-link",children:"Login"})})]})})]})})};var x=function(){var e=Object(s.useState)(!1),t=Object(r.a)(e,2),c=t[0],n=t[1];function a(e){n(e)}return Object(s.useEffect)((function(){null!==localStorage.getItem("token")&&fetch("https://quiet-retreat-88465.herokuapp.com/verify",{method:"get",headers:{Authorization:"Bearer "+localStorage.getItem("token")},mode:"cors"}).then((function(e){200===e.status?n(!0):(n(!1),localStorage.removeItem("token"))}))}),[]),Object(s.useEffect)((function(){}),[c]),Object(j.jsx)("div",{className:"App",children:Object(j.jsxs)(i.a,{hashType:"slash",children:[Object(j.jsx)(p,{setLogin:a,loggedIn:c}),Object(j.jsxs)(u.d,{children:[Object(j.jsx)(u.b,{path:"/",exact:!0,component:b}),Object(j.jsx)(u.b,{path:"/blog/",exact:!0,children:Object(j.jsx)(d,{})}),Object(j.jsx)(u.b,{path:"/blog/create",exact:!0,children:Object(j.jsx)(O,{})}),Object(j.jsx)(u.b,{path:"/blog/:id/edit",exact:!0,children:Object(j.jsx)(O,{})}),Object(j.jsx)(u.b,{path:"/blog/:id",exact:!0,children:Object(j.jsx)(h,{})}),Object(j.jsx)(u.b,{path:"/login",exact:!0,children:Object(j.jsx)(f,{setLogin:a})})]})]})})};o.a.render(Object(j.jsx)(n.a.StrictMode,{children:Object(j.jsx)(x,{})}),document.getElementById("root"))}},[[34,1,2]]]);
//# sourceMappingURL=main.2d86f5f9.chunk.js.map
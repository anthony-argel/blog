(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{11:function(e,t,n){},16:function(e,t,n){},35:function(e,t,n){"use strict";n.r(t);var c=n(1),o=n.n(c),s=n(21),i=n.n(s),r=n(3),a=n(6),l=(n(16),n(11),n(0));var j=function(e){var t=Object(c.useState)([]),n=Object(r.a)(t,2),o=n[0],s=n[1],i=Object(c.useState)(-1),j=Object(r.a)(i,2),u=j[0],b=j[1];return Object(c.useEffect)((function(){fetch("https://quiet-retreat-88465.herokuapp.com/blog",{method:"GET"}).then((function(e){return e.json()})).then((function(e){s(e)}))}),[]),Object(c.useEffect)((function(){if(o.length>0){var e=Math.floor(Math.random()*o.length);b(e)}}),[o]),Object(l.jsxs)("div",{className:"content flex-row",children:[Object(l.jsxs)("div",{children:[Object(l.jsx)("p",{style:{textAlign:"center",fontSize:"3vw",margin:"2vh 0"},children:"Recent Posts"}),-1!==u?Object(l.jsxs)("ul",{className:"recent-posts",children:[Object(l.jsx)("li",{children:Object(l.jsx)(a.b,{to:"/blog/"+o[0]._id,children:o[0].title})}),Object(l.jsx)("li",{children:Object(l.jsx)(a.b,{to:"/blog/"+o[1]._id,children:o[1].title})}),Object(l.jsx)("li",{children:Object(l.jsx)(a.b,{to:"/blog/"+o[2]._id,children:o[2].title})})]}):"loading..."]}),Object(l.jsxs)("div",{children:[Object(l.jsx)("p",{style:{textAlign:"center",fontSize:"3vw",margin:"2vh 0"},children:"Random Post"}),Object(l.jsx)("div",{className:"post",style:{textAlign:"flexStart"},children:-1!==u?Object(l.jsx)(a.b,{to:"/blog/"+o[u]._id,children:Object(l.jsxs)("div",{children:[Object(l.jsx)("p",{children:o[u].title}),Object(l.jsx)("p",{dangerouslySetInnerHTML:{__html:o[u].post}})]})}):Object(l.jsx)("p",{children:'"Loading"'})})]})]})},u=n(12);var b=function(e){var t=Object(c.useState)(""),n=Object(r.a)(t,2),o=n[0],s=n[1],i=Object(c.useState)([]),j=Object(r.a)(i,2),b=j[0],h=j[1];return Object(c.useEffect)((function(){var e=localStorage.getItem("token");s(e),fetch("https://quiet-retreat-88465.herokuapp.com/blog",{method:"GET"}).then((function(e){return e.json()})).then((function(e){h(e.reverse())}))}),[]),Object(c.useEffect)((function(){}),[o]),Object(l.jsx)("div",{className:"content",children:0===b.lengths?Object(l.jsx)("div",{children:"Loading posts"}):b.map((function(e,t){return Object(l.jsx)(a.b,{to:"/blog/"+e._id,children:Object(l.jsxs)("div",{className:"post",children:[Object(l.jsx)("p",{className:"title",children:e.title}),Object(l.jsxs)("p",{children:["Posted ",u.DateTime.fromISO(e.postdate).toFormat("LLL dd, yyyy")]}),Object(l.jsx)("hr",{}),Object(l.jsx)("div",{className:"message",dangerouslySetInnerHTML:{__html:e.post}})]})},e._id)}))})},h=n(4);var d=function(e){var t=Object(c.useState)(),n=Object(r.a)(t,2),o=n[0],s=n[1],i=Object(c.useState)([]),j=Object(r.a)(i,2),b=j[0],d=j[1],O=Object(c.useState)(""),m=Object(r.a)(O,2),f=m[0],p=m[1],x=Object(h.g)().id,g=Object(c.useState)(""),v=Object(r.a)(g,2),S=v[0],y=v[1],E=Object(c.useState)(!1),T=Object(r.a)(E,2),k=T[0],N=T[1];Object(c.useEffect)((function(){var e=localStorage.getItem("token");null!==e&&y(e),fetch("https://quiet-retreat-88465.herokuapp.com/blog/"+x,{method:"GET"}).then((function(e){return e.json()})).then((function(e){s(e)})),_()}),[]);var _=function(){fetch("https://quiet-retreat-88465.herokuapp.com/blog/"+x+"/comments",{method:"GET"}).then((function(e){return e.json()})).then((function(e){d(e)}))};Object(c.useEffect)((function(){}),[o]);var L=function(e){e.preventDefault(),console.log(f),fetch("https://quiet-retreat-88465.herokuapp.com/blog/"+x,{method:"DELETE",headers:{Authorization:"Bearer "+S},mode:"cors"}).then((function(e){200===e.status&&N(!0)}))};return Object(l.jsxs)("div",{className:"content",children:[function(){if(k)return Object(l.jsx)(h.a,{push:!0,to:"/blog"})}(),"undefined"===typeof o?"Loading":o.map((function(e){return Object(l.jsxs)("div",{className:"post",children:[Object(l.jsx)("h1",{style:{marginBottom:"2vh"},children:e.title}),Object(l.jsxs)("h2",{children:["Posted ",u.DateTime.fromISO(e.postdate).toFormat("LLL dd, yyyy")]}),Object(l.jsx)("hr",{}),Object(l.jsx)("p",{className:"message",dangerouslySetInnerHTML:{__html:e.post}}),Object(l.jsxs)("div",{className:"flex-row",style:{marginTop:"4vh"},children:[""===S?null:Object(l.jsx)("p",{onClick:L,style:{cursor:"pointer",marginRight:"2vw"},children:"Delete Post"}),""===S?null:Object(l.jsx)(a.b,{to:"/blog/".concat(x,"/edit"),children:"Edit Post"})]})]},x)})),Object(l.jsxs)("form",{onSubmit:function(e){e.preventDefault(),console.log(f),fetch("https://quiet-retreat-88465.herokuapp.com/blog/"+x,{method:"POST",body:JSON.stringify({comment:f}),headers:{"Content-Type":"application/json"},mode:"cors"}).then((function(e){200===e.status&&_()}))},children:[Object(l.jsx)("textarea",{name:"comment",id:"comment-box",required:!0,onChange:function(e){return p(e.target.value)}}),Object(l.jsx)("br",{}),Object(l.jsx)("input",{type:"submit",value:"Post Comment"})]}),Object(l.jsxs)("div",{className:"commentArea",children:[Object(l.jsx)("p",{style:{textAlign:"center",marginTop:"3vh"},children:"Comments"}),Object(l.jsx)("hr",{}),"undefined"===typeof b?"Loading":b.map((function(e){return Object(l.jsxs)("div",{className:"comment",children:[Object(l.jsx)("p",{children:e.message}),""===S?null:Object(l.jsx)("button",{style:{cursor:"pointer"},value:e._id,onClick:function(){var t;t=e._id,console.log(f),fetch("https://quiet-retreat-88465.herokuapp.com/blog/"+x+"/comment/"+t,{method:"DELETE",headers:{Authorization:"Bearer "+S},mode:"cors"}).then((function(e){200===e.status&&_()}))},children:"Delete"})]},e._id)}))]})]})},O=n(17);var m=function(e){var t=Object(c.useState)(""),n=Object(r.a)(t,2),o=n[0],s=n[1],i=Object(c.useState)(""),a=Object(r.a)(i,2),j=a[0],u=a[1],b=Object(c.useState)(""),d=Object(r.a)(b,2),m=d[0],f=d[1],p=Object(c.useState)(!0),x=Object(r.a)(p,2),g=x[0],v=x[1],S=Object(c.useState)(!1),y=Object(r.a)(S,2),E=y[0],T=y[1],k=Object(h.g)().id,N=Object(c.useState)(!1),_=Object(r.a)(N,2),L=_[0],C=_[1],I=Object(c.useState)(),w=Object(r.a)(I,2),P=w[0],q=w[1];return Object(c.useEffect)((function(){k&&fetch("https://quiet-retreat-88465.herokuapp.com/blog/"+k,{method:"GET",mode:"cors"}).then((function(e){if(200===e.status)return e.json()})).then((function(e){return q(e)}));var e=localStorage.getItem("token");null===e?v(!1):s(e)}),[]),Object(c.useEffect)((function(){P&&console.log(P)}),[P]),Object(c.useEffect)((function(){}),[o]),Object(l.jsxs)("div",{className:"content",children:[function(){if(!g)return Object(l.jsx)(h.a,{push:!0,to:"/login"})}(),function(){if(E)return Object(l.jsx)(h.a,{push:!0,to:"/blog"})}(),function(){if(L)return Object(l.jsx)(h.a,{push:!0,to:"/blog/".concat(k)})}(),Object(l.jsx)("h1",{children:"Create A Post"}),Object(l.jsxs)("form",{className:"flex-column",onSubmit:P?function(e){e.preventDefault(),fetch("https://quiet-retreat-88465.herokuapp.com/blog/"+k,{method:"PUT",body:JSON.stringify({post:j,title:m}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+o},mode:"cors"}).then((function(e){401===e.status&&localStorage.removeItem("token"),200===e.status&&(P?C(!0):T(!0))}))}:function(e){e.preventDefault(),fetch("https://quiet-retreat-88465.herokuapp.com/blog",{method:"POST",body:JSON.stringify({post:j,title:m}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+o},mode:"cors"}).then((function(e){401===e.status&&localStorage.removeItem("token"),200===e.status&&T(!0)}))},children:[P?Object(l.jsxs)("div",{children:[Object(l.jsx)("label",{htmlFor:"prev-title",children:"Previous Title:"}),Object(l.jsx)("br",{}),Object(l.jsx)("input",{type:"text",style:{minWidth:"30vw",marginBottom:"3vh"},value:P[0].title,required:!0})]}):null,Object(l.jsxs)("div",{children:[Object(l.jsx)("label",{htmlFor:"title",children:"Title:"}),Object(l.jsx)("br",{}),Object(l.jsx)("input",{type:"text",style:{minWidth:"30vw",marginBottom:"3vh"},required:!0,onChange:function(e){return f(e.target.value)}})]}),Object(l.jsx)(O.a,{apiKey:Object({NODE_ENV:"production",PUBLIC_URL:"/blog",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).TINY_KEY,onEditorChange:function(e,t){return u(e)},initialValue:P?P[0].post:"loading",init:{height:500,menubar:!1,plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table paste code help wordcount"],toolbar:"undo redo | formatselect | bold italic backcolor |                         alignleft aligncenter alignright alignjustify |                         bullist numlist outdent indent | removeformat | help | image"}}),Object(l.jsx)("input",{type:"submit",value:"submit"})]})]})};var f=function(e){var t=Object(c.useState)(""),n=Object(r.a)(t,2),o=n[0],s=n[1],i=Object(c.useState)(""),a=Object(r.a)(i,2),j=a[0],u=a[1],b=Object(c.useState)(""),d=Object(r.a)(b,2),O=d[0],m=d[1],f=Object(c.useState)(!1),p=Object(r.a)(f,2),x=p[0],g=p[1],v=Object(c.useState)(!1),S=Object(r.a)(v,2),y=S[0],E=S[1];return Object(c.useEffect)((function(){""!==O&&(localStorage.setItem("token",O),e.setLogin(!0),E(!0))}),[O]),Object(l.jsxs)("div",{className:"content",children:[function(){if(y)return Object(l.jsx)(h.a,{push:!0,to:"/blog"})}(),Object(l.jsx)("h1",{children:"Login Form"}),Object(l.jsxs)("form",{onSubmit:function(e){e.preventDefault(),fetch("https://quiet-retreat-88465.herokuapp.com/login",{method:"POST",body:JSON.stringify({username:o,password:j}),headers:{"Content-Type":"application/json"},mode:"cors"}).then((function(e){if(400!==e.status)return e.json();localStorage.removeItem("token"),g(!0)})).then((function(e){e&&m(e.token)}))},className:"login-form",children:[Object(l.jsx)("input",{type:"text",name:"username",required:!0,placeholder:"username",onChange:function(e){return s(e.target.value)}}),Object(l.jsx)("input",{type:"password",name:"password",placeholder:"password",required:!0,onChange:function(e){return u(e.target.value)}}),Object(l.jsx)("input",{type:"submit",value:"login"})]}),x?Object(l.jsx)("p",{children:"Failed to log in. Please try again."}):null]})},p=function(e){return Object(c.useEffect)((function(){}),[]),Object(l.jsxs)("nav",{children:[Object(l.jsx)("div",{className:"nav-left",children:Object(l.jsxs)("ul",{className:"flex-row",children:[Object(l.jsx)("li",{children:Object(l.jsx)(a.c,{to:"/home",children:"Home"})}),Object(l.jsx)("li",{children:Object(l.jsx)(a.c,{to:"/blog",children:"Blog"})})]})}),Object(l.jsx)("div",{className:"nav-right",children:Object(l.jsxs)("ul",{className:"flex-row",children:[e.loggedIn?Object(l.jsx)("li",{onClick:function(){localStorage.removeItem("token"),e.setLogin(!1)},style:{cursor:"pointer"},children:"Log Out"}):Object(l.jsx)("li",{children:Object(l.jsx)(a.c,{to:"/login",children:"Login"})}),e.loggedIn?Object(l.jsx)("li",{children:Object(l.jsx)(a.c,{to:"/blog/create",children:"Create"})}):null]})})]})};var x=function(){var e=Object(c.useState)(!1),t=Object(r.a)(e,2),n=t[0],o=t[1];function s(e){o(e)}return Object(c.useEffect)((function(){null!==localStorage.getItem("token")&&o(!0)}),[]),Object(c.useEffect)((function(){}),[n]),Object(l.jsx)("div",{className:"App",children:Object(l.jsxs)(a.a,{children:[Object(l.jsx)(p,{setLogin:s,loggedIn:n}),Object(l.jsxs)(h.d,{children:[Object(l.jsx)(h.b,{path:"/",exact:!0,children:Object(l.jsx)(h.a,{to:"/home"})}),Object(l.jsx)(h.b,{path:"/home",exact:!0,children:Object(l.jsx)(j,{})}),Object(l.jsx)(h.b,{path:"/blog",exact:!0,children:Object(l.jsx)(b,{})}),Object(l.jsx)(h.b,{path:"/blog/create",exact:!0,children:Object(l.jsx)(m,{})}),Object(l.jsx)(h.b,{path:"/blog/:id/edit",exact:!0,children:Object(l.jsx)(m,{})}),Object(l.jsx)(h.b,{path:"/blog/:id",exact:!0,children:Object(l.jsx)(d,{})}),Object(l.jsx)(h.b,{path:"/login",exact:!0,children:Object(l.jsx)(f,{setLogin:s})})]})]})})};i.a.render(Object(l.jsx)(o.a.StrictMode,{children:Object(l.jsx)(x,{})}),document.getElementById("root"))}},[[35,1,2]]]);
//# sourceMappingURL=main.7cddacb9.chunk.js.map